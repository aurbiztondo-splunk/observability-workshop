<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 5.19.0+tip"><meta name=description content="Splunk Observability Workshops"><title>1.1 Generate load :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v4.100/en/apm/online-boutique/locust/index.html rel=alternate hreflang=x-default><link href=https://splunk.github.io/observability-workshop/v4.100/en/apm/online-boutique/locust/index.html rel=alternate hreflang=en><link href=https://splunk.github.io/observability-workshop/v4.100/ja/apm/online-boutique/locust/index.html rel=alternate hreflang=ja><link href=https://splunk.github.io/observability-workshop/v4.100/en/apm/online-boutique/locust/index.html rel=canonical type=text/html title="1.1 Generate load :: Splunk Observability Cloud Workshops"><link href=../../../../en/apm/online-boutique/locust/index.xml rel=alternate type=application/rss+xml title="1.1 Generate load :: Splunk Observability Cloud Workshops"><link href=../../../../images/favicon.ico?1692263987 rel=icon type=image/x-icon sizes=any><link href=../../../../css/fontawesome-all.min.css?1692263990 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fontawesome-all.min.css?1692263990 rel=stylesheet></noscript><link href=../../../../css/nucleus.css?1692263990 rel=stylesheet><link href=../../../../css/auto-complete.css?1692263990 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/auto-complete.css?1692263990 rel=stylesheet></noscript><link href=../../../../css/perfect-scrollbar.min.css?1692263990 rel=stylesheet><link href=../../../../css/fonts.css?1692263990 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fonts.css?1692263990 rel=stylesheet></noscript><link href=../../../../css/theme.css?1692263990 rel=stylesheet><link href=../../../../css/theme-splunk-light.css?1692263990 rel=stylesheet id=variant-style><link href=../../../../css/variant.css?1692263990 rel=stylesheet><link href=../../../../css/print.css?1692263990 rel=stylesheet media=print><link href=../../../../css/format-print.css?1692263990 rel=stylesheet><link href=../../../../css/ie.css?1692263990 rel=stylesheet><script src=../../../../js/url.js?1692263990></script>
<script src=../../../../js/variant.js?1692263990></script>
<script>window.index_js_url="../../../../en/index.search.js";var root_url="../../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://splunk.github.io/observability-workshop/v4.100/",window.variants&&variants.init(["splunk-light","splunk-dark","aws"])</script><style>@media screen and (min-width:1300px){#body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1300px;width:100%}}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../../en/apm/online-boutique/locust/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/apm/index.html><span itemprop=name>Splunk APM</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/apm/online-boutique/index.html><span itemprop=name>1. The Online Boutique</span></a><meta itemprop=position content="3">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>1.1 Generate load</span><meta itemprop=position content="4"></li></ol></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=11-generate-load>1.1 Generate load</h1><span class="btn cstyle transparent"><button type=button>
<i class="fa-fw fas fa-clock"></i>
5 minutes</button></span><h2 id=1-generate-traffic>1. Generate traffic</h2><p>The Online Boutique deployment contains a container running Locust that we can use to generate load traffic against the website to generate metrics, traces and spans.</p><div class=expand><input type=checkbox id=expand-1d58b1d007cf11343b39d88a064b2570 aria-controls=expandcontent-1d58b1d007cf11343b39d88a064b2570>
<label class=expand-label for=expand-1d58b1d007cf11343b39d88a064b2570><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja</strong> - Access your Locust instance</span></span></label><div id=expandcontent-1d58b1d007cf11343b39d88a064b2570 class=expand-content><div class="box notices cstyle blue"><div class=box-label></div><div class=box-content><p>Locust is available on port 82 of the EC2 instance&rsquo;s IP address. Open a new tab in your web browser and go to <code>http://&lt;ec2-ip-address>:82/</code>, you will then be able to see the Locust running.</p></div></div></div></div><p>Your Workshop instructor will provide you with URL to access the Locust load generator. Enter this URL into your browser and you will see the Locust Start new load test landing page.</p><p><a href=#image-780460a51b022721b4bb4e527c9e0be4 class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/locust.png alt=Locust style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-780460a51b022721b4bb4e527c9e0be4><img src=../../../../en/apm/online-boutique/locust/../../images/locust.png alt=Locust class=lightbox-image loading=lazy></a></p><p>Set the <strong>Spawn rate</strong> to be 2 and click <strong>Start Swarming</strong>, this will start a gentle continuous load on the application.</p><p><a href=#image-f789d09e66ad457d9bd6eefa5ddd262b class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/locust-spawn-rate.png alt="Spawn Rate" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-f789d09e66ad457d9bd6eefa5ddd262b><img src=../../../../en/apm/online-boutique/locust/../../images/locust-spawn-rate.png alt="Spawn Rate" class=lightbox-image loading=lazy></a></p><p><a href=#image-c136feac6b22513a981d6fa9fa4fc77a class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/locust-statistics.png alt=Statistics style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-c136feac6b22513a981d6fa9fa4fc77a><img src=../../../../en/apm/online-boutique/locust/../../images/locust-statistics.png alt=Statistics class=lightbox-image loading=lazy></a></p><hr><p>Now go to <strong>Dashboards → All Dashboards → APM Services → Service</strong>.</p><p>For this we need to know the name of your application environment. In this workshop all the environments use: <code>&lt;hostname>-apm-env</code>.</p><p>To find the hostname, on the AWS/EC2 instance run the following command:</p><div class=tab-panel data-tab-group=0a294c5001a8129615d7139adbb53a7e><div class=tab-nav><div class=tab-nav-title>&#8203;</div><button data-tab-item="Echo Hostname" class="tab-nav-button tab-panel-style cstyle initial active" onclick='switchTab("0a294c5001a8129615d7139adbb53a7e","Echo Hostname")'><div><div class=tab-nav-hidden>Echo Hostname</div><div class=tab-nav-text>Echo Hostname</div></div></button>
<button data-tab-item="Output Example" class="tab-nav-button tab-panel-style cstyle initial" onclick='switchTab("0a294c5001a8129615d7139adbb53a7e","Output Example")'><div><div class=tab-nav-hidden>Output Example</div><div class=tab-nav-text>Output Example</div></div></button></div><div class=tab-content-container><div data-tab-item="Echo Hostname" class="tab-content tab-panel-style cstyle initial active"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=k>$(</span>hostname<span class=k>)</span>-apm-env</span></span></code></pre></div></div></div><div data-tab-item="Output Example" class="tab-content tab-panel-style cstyle initial"><div class=tab-content-text><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>bdzx-apm-env</span></span></code></pre></div></div></div></div></div><p>Select your environment you found in the previous step then select the <code>frontend</code> service and set time to Past 15 minutes.</p><p><a href=#image-1ed58022fd343550538b97f82e0615d2 class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/online-boutique-service-dashboard.png alt="APM Dashboard" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-1ed58022fd343550538b97f82e0615d2><img src=../../../../en/apm/online-boutique/locust/../../images/online-boutique-service-dashboard.png alt="APM Dashboard" class=lightbox-image loading=lazy></a></p><p>With this automatically generated dashboard you can keep an eye out for the health of your service(s) using RED (Rate, Error & Duration) metrics. It provides various performance related charts as well as correlated information on the underlying host and Kubernetes pods (if applicable).</p><p>Take some time to explore the various charts in this dashboard</p><hr><h2 id=2-verify-splunk-apm-metrics>2. Verify Splunk APM metrics</h2><p>In the left hand menu card click on <strong>APM</strong> this will bring you to the APM Overview dashboard:</p><p><a href=#image-3672b62e06d08e25c3395cacba349900 class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/online-boutique-apm.png alt="select APM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-3672b62e06d08e25c3395cacba349900><img src=../../../../en/apm/online-boutique/locust/../../images/online-boutique-apm.png alt="select APM" class=lightbox-image loading=lazy></a></p><p>Select the <strong>Explore</strong> on the right hand side and select your environment you found before and set the time to 15 minutes. This will show you the automatically generated Dependency/Service Map for the Online Boutique application.</p><p>It should look similar to the screenshot below:</p><p><a href=#image-d5b01a66d60881df70ca542d17f391c8 class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/online-boutique-map.png alt="Online Boutique in APM" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-d5b01a66d60881df70ca542d17f391c8><img src=../../../../en/apm/online-boutique/locust/../../images/online-boutique-map.png alt="Online Boutique in APM" class=lightbox-image loading=lazy></a></p><p>The legend at the bottom of the page explains the different visualizations in the Dependency/Service Map.</p><p><a href=#image-f27ee3ce968b16a93ea06680142c509f class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/apm-legend.png alt="APM Legend" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-f27ee3ce968b16a93ea06680142c509f><img src=../../../../en/apm/online-boutique/locust/../../images/apm-legend.png alt="APM Legend" class=lightbox-image loading=lazy></a></p><ul><li>Service requests, error rate and root error rate.</li><li>Request rate, latency and error rate</li></ul><p>Also in this view you can see the overall Error and Latency rates over time charts.</p><h2 id=3-opentelemetry-dashboard>3. OpenTelemetry Dashboard</h2><p>Once the Open Telemetery Collector is deployed the platform will automatically provide a built in dashboard display OpenTelemetry Collector metrics.</p><p>From the top left hamburger menu <strong>Dashboards → OpenTelemetry Collector</strong>, scroll all the way to the bottom of the page and validate metrics and spans are being sent:</p><p><a href=#image-c2b668a7b2c2e39ba19bbfa1c8a0054e class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/otel-dashboard.png alt="OpenTelemetry Collector dashboard" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-c2b668a7b2c2e39ba19bbfa1c8a0054e><img src=../../../../en/apm/online-boutique/locust/../../images/otel-dashboard.png alt="OpenTelemetry Collector dashboard" class=lightbox-image loading=lazy></a></p><h2 id=4-opentelemetry-zpages>4. OpenTelemetry zpages</h2><p>To debug the traces being sent you can use the zpages extension. <a href=https://github.com/open-telemetry/opentelemetry-specification/blob/main/experimental/trace/zpages.md#tracez target=_blank>zpages</a> are part of the OpenTelemetry collector and provide live data for troubleshooting and statistics.</p><div class=expand><input type=checkbox id=expand-73525ececc2ebb87bf589bcef34504b2 aria-controls=expandcontent-73525ececc2ebb87bf589bcef34504b2>
<label class=expand-label for=expand-73525ececc2ebb87bf589bcef34504b2><i class="fas fa-chevron-down"></i>
<i class="fas fa-chevron-right"></i>
<span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-user-ninja"></i></span><span class=badge-content><strong>Ninja</strong> - Access zPages on your EC2 instance</span></span></label><div id=expandcontent-73525ececc2ebb87bf589bcef34504b2 class=expand-content><div class="box notices cstyle blue"><div class=box-label></div><div class=box-content><p>zPages is available on port <code>55679</code> of the EC2 instance&rsquo;s IP address. Open a new tab in your web browser and enter in <code>http://{==EC2-IP==}:55679/debug/tracez</code>, you will then be able to see the zpages output.</p><p>Alternatively, from your shell prompt you can run a text based browser:</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lynx http://localhost:55679/debug/tracez</span></span></code></pre></div></div></div></div></div><p>Your Workshop instructor will provide you with a URL to access zPages. Enter this URL into your browser and you will see the zPages output.</p><p><a href=#image-a0c443bae2147ac9a0205b539a7fbdf6 class=lightbox-link><img src=../../../../en/apm/online-boutique/locust/../../images/zpages.png alt=zpages style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-a0c443bae2147ac9a0205b539a7fbdf6><img src=../../../../en/apm/online-boutique/locust/../../images/zpages.png alt=zpages class=lightbox-image loading=lazy></a></p><footer class=footline></footer></article></div></main></div><script src=../../../../js/clipboard.min.js?1692263990 defer></script>
<script src=../../../../js/perfect-scrollbar.min.js?1692263990 defer></script>
<script src=../../../../js/theme.js?1692263990 defer></script></body></html>