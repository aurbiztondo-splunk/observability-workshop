<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 5.14.3+tip"><meta name=description content="Splunk APM is a NoSample™ Full-fidelity application performance monitoring and troubleshooting solution for cloud-native, microservices-based applications."><title>Splunk APM :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v4.88/en/other/o11y4rookies/apm/index.html rel=canonical type=text/html title="Splunk APM :: Splunk Observability Cloud Workshops"><link href=../../../../en/other/o11y4rookies/apm/index.xml rel=alternate type=application/rss+xml title="Splunk APM :: Splunk Observability Cloud Workshops"><link href=../../../../images/favicon.ico?1684957787 rel=icon type=image/x-icon><link href=../../../../css/fontawesome-all.min.css?1684957790 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fontawesome-all.min.css?1684957790 rel=stylesheet></noscript><link href=../../../../css/nucleus.css?1684957790 rel=stylesheet><link href=../../../../css/auto-complete.css?1684957790 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/auto-complete.css?1684957790 rel=stylesheet></noscript><link href=../../../../css/perfect-scrollbar.min.css?1684957790 rel=stylesheet><link href=../../../../css/fonts.css?1684957790 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../../css/fonts.css?1684957790 rel=stylesheet></noscript><link href=../../../../css/theme.css?1684957790 rel=stylesheet><link href=../../../../css/theme-splunk-light.css?1684957790 rel=stylesheet id=variant-style><link href=../../../../css/variant.css?1684957790 rel=stylesheet><link href=../../../../css/print.css?1684957790 rel=stylesheet media=print><link href=../../../../css/format-print.css?1684957790 rel=stylesheet><link href=../../../../css/ie.css?1684957790 rel=stylesheet><script src=../../../../js/url.js?1684957790></script>
<script src=../../../../js/variant.js?1684957790></script>
<script>window.index_js_url="../../../../en/index.search.js";var root_url="../../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://splunk.github.io/observability-workshop/v4.88/",window.variants&&variants.init(["splunk-light","splunk-dark","aws"])</script><style>@media screen and (min-width:1300px){#body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1300px;width:100%}}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../../en/other/o11y4rookies/apm/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/other/index.html><span itemprop=name>Other Workshops</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../../en/other/o11y4rookies/index.html><span itemprop=name>Observability 4 Rookies</span></a><meta itemprop=position content="3">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Splunk APM</span><meta itemprop=position content="4"></li></ol></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=splunk-apm>Splunk APM</h1><p>Splunk APM is a NoSample™ Full-fidelity application performance monitoring and troubleshooting solution for cloud-native, microservices-based applications.</p><p>By collecting all traces, instead of a sampled subset, no anomaly goes undetected. Whether a user experiences an error or longer-than-usual latency, you’ll be able to know and act on it within seconds. Furthermore, not all bad behavior results in errors — as your developers create new applications they need to know whether their canary releases provide the expected results. Only by collecting all trace data will you ensure that your cloud-native applications behave the way they are supposed to.</p><p>Infrastructure and application performance are interdependent. To see the full picture, Splunk APM provides seamless correlation between cloud infrastructure and the microservices running on top of it. If your application acts out because of memory leakage, a noisy neighbor container or any other infrastructure-related issue, Splunk will let you know. To complete the picture, in-context access to Splunk logs and events enable deeper troubleshooting and root-cause analysis.</p><p><a href=#image-9c64bdd4c0118300641e62a47fe21299 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/../../../apm/images/arch-overview.png alt="Architecture Overview" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-9c64bdd4c0118300641e62a47fe21299><img src=../../../../en/other/o11y4rookies/apm/../../../apm/images/arch-overview.png alt="Architecture Overview" class=lightbox-image loading=lazy></a></p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Splunk APM</h1><article class=default><header class=headline></header><h1 id=1-using-splunk-apm>1. Using Splunk APM</h1><span class="btn cstyle transparent"><button type=button>
<i class="fa-fw fas fa-clock"></i>
15 minutes</button></span><ul><li>APM Overview - RED metrics</li><li>Using the Service Map</li><li>Introduction to Tag Spotlight</li><li>Example Traces</li><li>Contextual Links to Infra</li></ul><h2 id=1-traces-and-spans-explained>1. Traces and Spans explained</h2><p>A trace is a collection of spans that share the same trace ID, representing a unique transaction handled by your application and its constituent services.</p><p><a href=#image-fb9611d22d0a8195e642b842de5a436e class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/../../../../apm/images/trace-spans.png alt="Traces and Spans" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-fb9611d22d0a8195e642b842de5a436e><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/../../../../apm/images/trace-spans.png alt="Traces and Spans" class=lightbox-image loading=lazy></a></p><p>Each span has a name, representing the operation captured by this span, and a service name, representing within which service the operation took place.</p><p>Additionally, spans may reference another span as their parent, defining the relationships between the operations captured in the trace that were performed to process that transaction.</p><p>Each span contains a lot of information about the method, operation, or block of code that it captures, including:</p><ul><li>the operation name</li><li>the start time of the operation with microsecond precision</li><li>how long the operation took to execute, also with microsecond precision</li><li>the logical name of the service on which the operation took place</li><li>the IP address of the service instance on which the operation took place</li></ul><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of 1. Using Splunk APM</h1><article class=default><header class=headline></header><h1 id=11-service-map>1.1 Service Map</h1><h2 id=service-map>Service Map</h2><p>Click on <strong>paymentservice</strong> in the service map and select <strong>version</strong> from the <code>breakdown</code> drop down filter underneath <strong>paymentservice</strong>. This will filter our service map by the custom span tag <strong>version</strong>.</p><p>You will now see the service map has been updated like the below screenshot to show the different versions of the <strong>paymentservice</strong>.</p><p>Splunk Observability shows that not only is paymentservice experiencing errors (you can see request rate vs error rate) but that this service is the root cause.</p><p>This happens automatically with our AI-directed triage capabilities once distributed tracing is enabled in your services. You don’t have to set a threshold or anything for it to populate just like this.</p><p>This is one example of how customers can detect issues faster and know where to look for errors and hence helps reduce the MTTD and MTTR.</p><p><a href=#image-a24931f60b601f4d6e790252199fd67e class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/service_map/../../../../../apm/images/paymentservice.png alt="Payment Service" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-a24931f60b601f4d6e790252199fd67e><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/service_map/../../../../../apm/images/paymentservice.png alt="Payment Service" class=lightbox-image loading=lazy></a></p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=12-tag-spotlight>1.2 Tag Spotlight</h1><h2 id=tag-spotlight>Tag Spotlight</h2><p>On the right hand side of the screen scroll down on <strong>Tag Spotlight</strong>, ensure <strong>Top Across All Indexed Tags</strong> is selected in the dropdown click the full screen button as indicated in the screenshot below.</p><p><a href=#image-969b06c4eb3012215cf82dfd969768d4 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/tag-spotlight.png alt="Tag Spotlight" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-969b06c4eb3012215cf82dfd969768d4><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/tag-spotlight.png alt="Tag Spotlight" class=lightbox-image loading=lazy></a></p><p>The Tag Spotlight Page will be displayed. From this page you can view the top tags in your application and their corresponding error rates and request rates.</p><p>Note that for the <strong>version</strong> span tag it appears that version <code>350.10</code> has a 100% error rate and for our <strong>tenant.level</strong> span tag it shows that all three tenants (Gold, Silver & Bronze) have errors present.</p><p><a href=#image-25c863da27b7a28260fa5e5f2d512480 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/tag-spotlight-dashboard.png alt="Tag Spotlight Dashboard" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-25c863da27b7a28260fa5e5f2d512480><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/tag-spotlight-dashboard.png alt="Tag Spotlight Dashboard" class=lightbox-image loading=lazy></a></p><p>The Tag Spotlight page is interactive and allows you to add a tag as a filter by simply clicking on your desired tag. Click on <strong>gold</strong> under <strong>tenant.level</strong> to add it as a filter. Once this is done the page will now only display data with <strong>gold</strong> as it’s <strong>tenant.level</strong>.</p><p><a href=#image-fd910bb602328cf3d211ec3335b8da86 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/gold-tenant.png alt="Gold Tenant" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-fd910bb602328cf3d211ec3335b8da86><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/gold-tenant.png alt="Gold Tenant" class=lightbox-image loading=lazy></a></p><p>Tag Spotlight is very useful for analysing your data and spotting trends. We can see that for the Gold Tenant that out of the total number of requests, 55 of them are in error (this number will vary in your workshop).</p><p>If we correlate this to the version tag, we can see that version <code>350.10</code> served 55 requests and version <code>350.9</code> served 17 requests. This means that all of the requests that went through version <code>350.10</code> ended up in an error state.</p><p>In order to test this theory further that all of the requests from <strong>paymentservice</strong> version <code>350.10</code> result in an error, we can change our filter to another tenant by using the tag selector. Change your filter from <strong>gold</strong> tenant to <strong>silver</strong> tenant.</p><p><a href=#image-46035f36c78867624890026ee620f6b6 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/silver-tag-filter.png alt="Silver Tag Filter" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-46035f36c78867624890026ee620f6b6><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/silver-tag-filter.png alt="Silver Tag Filter" class=lightbox-image loading=lazy></a></p><p>Now we can perform a similar analysis by looking at the number of requests in error for the <strong>silver</strong> tenant and correlating that with the version number. Note the amount of errors for the <strong>silver</strong> tenant match the amount of requests for version <code>350.10</code>.</p><p><a href=#image-219731c527ccc0ba509696c250cbca91 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/silver-tenant.png alt="Silver Tenant" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-219731c527ccc0ba509696c250cbca91><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/silver-tenant.png alt="Silver Tenant" class=lightbox-image loading=lazy></a></p><p>Tag Spotlight not only allows you to look at request and error rates but also at the latency per service. In order to do this just select the latency button and remove your Silver Tenant Tag so that you can see the latency for all of the Payment Service.</p><p><a href=#image-063cbc571a692dd3f9a734db5a994c75 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/latency.png alt=Latency style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-063cbc571a692dd3f9a734db5a994c75><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/tag_spotlight/../../../../../apm/images/latency.png alt=Latency class=lightbox-image loading=lazy></a></p><p>Go back to your service map by pressing the <strong>X</strong> button on the far right underneath <strong>Clear All</strong>.</p><p>Click anywhere on the pink line in the <strong>Services by Error Rate</strong> graph in the top right hand corner. Once selected you should see a list of example traces. Click on one of the example traces with an initiating operation of <strong>frontend: POST /cart/checkout</strong>.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=13-example-trace>1.3 Example trace</h1><h2 id=example-trace>Example Trace</h2><p><a href=#image-151b3bf56c538402166ff131f012bdd6 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/example-trace.png alt="Example Trace" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-151b3bf56c538402166ff131f012bdd6><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/example-trace.png alt="Example Trace" class=lightbox-image loading=lazy></a></p><p>You should now see the entire trace along with the spans for the example trace that was selected. Spans which have errors are indicated by a red exclamation mark beside it. If you have a number such as <strong>x6</strong> in a grey box, click it to expand the compacted <code>paymentservice</code> spans.</p><p><a href=#image-4ea418ab72cf7b86fa7db51c6a150be4 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/trace-span.png alt="Example Trace" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-4ea418ab72cf7b86fa7db51c6a150be4><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/trace-span.png alt="Example Trace" class=lightbox-image loading=lazy></a></p><p>Now click one of the <code>paymentservice</code> spans with the red exclamation mark to expand it and see the associated metadata and some error details. Note that we are able to see that this error is caused by a 401 error and other useful information such as ‘tenant’ and ‘version’ is also displayed.</p><p><a href=#image-75333d88b32bf65261cfd6d52fa0119a class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/trace-metadata.png alt="Traces and Spans" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-75333d88b32bf65261cfd6d52fa0119a><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/trace-metadata.png alt="Traces and Spans" class=lightbox-image loading=lazy></a></p><p>So we now know that the error is caused by an <strong>Invalid Request</strong> but we don&rsquo;t know what exact request. At the bottom of the page you should see a contextual link to Logs, clink on this link to view the logs associated with this span.</p><p><a href=#image-cdb236ed3d418b7ef2ebd08b1b66049a class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/logs_link.png alt="Logs Link" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-cdb236ed3d418b7ef2ebd08b1b66049a><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/logs_link.png alt="Logs Link" class=lightbox-image loading=lazy></a></p><p>You should now be looking at a <strong>Log Observer</strong> dashboard simialar to the image below.</p><p><a href=#image-07a48e846ada181b958ce10775cf9d2c class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/log_observer.png alt="Log Observer" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-07a48e846ada181b958ce10775cf9d2c><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/log_observer.png alt="Log Observer" class=lightbox-image loading=lazy></a></p><p>We can use the filter to display only the error logs. Click on <code>ERROR</code> in the top right hand corner, then <code>Add to filter</code></p><p><a href=#image-c7c59cc4c1df513fbbaed0f8623c0ab1 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/error_filter.png alt="Error Filter" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-c7c59cc4c1df513fbbaed0f8623c0ab1><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/error_filter.png alt="Error Filter" class=lightbox-image loading=lazy></a></p><p>You should now have a shorter list of log entries which have a <code>severity</code> of <code>ERROR</code></p><p><a href=#image-cf1aa1053c095328100d046ea21ea6e4 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/filtered_results.png alt="Filtered Results" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-cf1aa1053c095328100d046ea21ea6e4><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/filtered_results.png alt="Filtered Results" class=lightbox-image loading=lazy></a></p><p>Select any of the entries to view the details. We can now see how the error was caused by the use of an <strong>Invalid API Token</strong> that our developers have accidentally pushed to production!</p><p><a href=#image-706e35401e1219419fe0e645e60a5d83 class=lightbox-link><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/error_details.png alt="Error Details" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-706e35401e1219419fe0e645e60a5d83><img src=../../../../en/other/o11y4rookies/apm/using-splunk-apm/example_trace/../../../../../apm/images/error_details.png alt="Error Details" class=lightbox-image loading=lazy></a></p><p><strong>Congratulations</strong>, you have now completed the APM Workshop.</p><footer class=footline></footer></article></section></section></div></main></div><script src=../../../../js/clipboard.min.js?1684957790 defer></script>
<script src=../../../../js/perfect-scrollbar.min.js?1684957790 defer></script>
<script src=../../../../js/theme.js?1684957790 defer></script></body></html>