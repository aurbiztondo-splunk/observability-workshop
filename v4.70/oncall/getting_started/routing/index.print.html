<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 5.12.2+tip"><meta name=description content="Splunk Observability Workshops"><title>Creating Routing Keys :: Splunk Observability Cloud Workshops</title><link href=https://splunk.github.io/observability-workshop/v4.70/oncall/getting_started/routing/index.html rel=canonical type=text/html title="Creating Routing Keys :: Splunk Observability Cloud Workshops"><link href=../../../oncall/getting_started/routing/index.xml rel=alternate type=application/rss+xml title="Creating Routing Keys :: Splunk Observability Cloud Workshops"><link href=../../../images/favicon.ico?1679592573 rel=icon type=image/x-icon><link href=../../../css/fontawesome-all.min.css?1679592575 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fontawesome-all.min.css?1679592575 rel=stylesheet></noscript><link href=../../../css/nucleus.css?1679592575 rel=stylesheet><link href=../../../css/auto-complete.css?1679592575 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/auto-complete.css?1679592575 rel=stylesheet></noscript><link href=../../../css/perfect-scrollbar.min.css?1679592575 rel=stylesheet><link href=../../../css/fonts.css?1679592575 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../../css/fonts.css?1679592575 rel=stylesheet></noscript><link href=../../../css/theme.css?1679592575 rel=stylesheet><link href=../../../css/theme-splunk-light.css?1679592575 rel=stylesheet id=variant-style><link href=../../../css/variant.css?1679592575 rel=stylesheet><link href=../../../css/print.css?1679592575 rel=stylesheet media=print><link href=../../../css/format-print.css?1679592575 rel=stylesheet><link href=../../../css/ie.css?1679592575 rel=stylesheet><script src=../../../js/url.js?1679592575></script>
<script src=../../../js/variant.js?1679592575></script>
<script>window.index_js_url="../../../index.search.js";var root_url="../../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://splunk.github.io/observability-workshop/v4.70/",window.variants&&variants.init(["splunk-light","splunk-dark","aws"])</script><style>@media screen and (min-width:1300px){#body .flex-block-wrapper{margin-left:auto;margin-right:auto;max-width:1300px;width:100%}}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../../oncall/getting_started/routing/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle class=topbar-link title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../oncall/index.html><span itemprop=name>Splunk OnCall</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../../oncall/getting_started/index.html><span itemprop=name>User Profile</span></a><meta itemprop=position content="3">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Creating Routing Keys</span><meta itemprop=position content="4"></li></ol></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=creating-routing-keys>Creating Routing Keys</h1><h2 id=aim>Aim</h2><p>Routing Keys map the incoming alert messages from your monitoring system to an Escalation Policy which in turn sends the notifications to the appropriate team.</p><p>Note that routing keys are case insensitive and should only be composed of letters, numbers, hyphens, and underscores.</p><p>The aim of this module is for you to create some routing keys and then link them to your Escalation Policies you have created in the previous exercise.</p><hr><h2 id=1-instance-id>1. Instance ID</h2><p>Each participant requires a unique Routing Key so we use the Hostname of the EC2 Instance you were allocated. We are only doing this to ensure your Routing Key is unique and we know all Hostnames are unique. In a production deployment the Routing Key would typically reflect the name of a System or Service being monitored, or a Team such as 1st Line Support etc.</p><p>Your welcome e-mail informed you of the details of your EC2 Instance that has been provided for you to use during this workshop and you should have logged into this as part of the 1st exercise.</p><p>The e-mail also contained the Hostname of the Instance, but you can also obtain it from the Instance directly. To get your Hostname from within the shell session connected to your Instance run the following command:</p><div class=tab-panel data-tab-group=default><div class=tab-nav><button data-tab-item="Export Hostname" class="tab-nav-button active" onclick='switchTab("default","Export Hostname")'>
<span>Export Hostname</span></button>
<button data-tab-item="Example Output" class=tab-nav-button onclick='switchTab("default","Example Output")'>
<span>Example Output</span></button></div><div class=tab-content><div data-tab-item="Export Hostname" class="tab-content-text active"><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=si>${</span><span class=nv>HOSTNAME</span><span class=si>}</span>
</span></span></code></pre></div></div><div data-tab-item="Example Output" class=tab-content-text><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>zevn
</span></span></code></pre></div></div></div></div><p>It is very important that when creating the Routing Keys you use the 4 letter hostname allocated to you as a Detector has been configured within Splunk Infrastructure Monitoring using this hostname, so any deviation will cause future exercises to fail.</p><h2 id=2-create-routing-keys>2 Create Routing Keys</h2><p>Navigate to <strong>Settings</strong> on the main menu bar, you should now be at the <strong>Routing Keys</strong> page.</p><p>You are going to create the following two Routing Keys using the naming conventions listed in the following table, but replacing {==HOSTNAME==} with the value from above and replace <strong><code>TEAM_NAME</code></strong> with the team you were allocated or created earlier.</p><table><thead><tr><th>Routing Key</th><th>Escalation Policies</th></tr></thead><tbody><tr><td><strong><code>HOSTNAME</code></strong>_PRI</td><td><strong><code>TEAM_NAME</code></strong> : Primary</td></tr><tr><td><strong><code>HOSTNAME</code></strong>_WR</td><td><strong><code>TEAM_NAME</code></strong> : Waiting Room</td></tr></tbody></table><p>There will probably already be a number of Routing Keys configured, but to add a new one simply scroll to the bottom of the page and then click <strong>Add Key</strong></p><p>In the left hand box, enter the name for the key as per the table above. In the <strong>Routing Key</strong> column, select your Teams <strong>Primary</strong> policy from the drop down in the <strong>Escalation Polices</strong> column. You can start typing your Team Name to filter the results.</p><p><a href=#image-1e79e9f401d9176cf54f97045a30a5de class=lightbox-link><img src=../../../oncall/getting_started/routing/../../images/routing-key-add.png alt="Add Routing Key" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-1e79e9f401d9176cf54f97045a30a5de><img src=../../../oncall/getting_started/routing/../../images/routing-key-add.png alt="Add Routing Key" class=lightbox-image loading=lazy></a></p><div class="box notices cstyle default" style=--VARIABLE-BOX-color:info><div class=box-label>Note</div><div class=box-content><p>If there are a large number of participants on the workshop, resulting in an unusually large number of Escalation Policies sometimes the search filter does not list all the Policies under your Team Name. If this happens instead of using the search feature, simply scroll down to your team name, all the policies will then be listed.</p></div></div><p>Repeat the above steps for both Keys, <strong><code>xxxx_PRI</code></strong> and <strong><code>xxxx_WR</code></strong>, mapping them to your Teams Primary and Waiting Room policies.</p><p>You should now have two Routing Keys configured, similar to the following:</p><p><a href=#image-8663632390eb7e744a6850836560c0f7 class=lightbox-link><img src=../../../oncall/getting_started/routing/../../images/routing-keys.png alt="Routing Keys" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-8663632390eb7e744a6850836560c0f7><img src=../../../oncall/getting_started/routing/../../images/routing-keys.png alt="Routing Keys" class=lightbox-image loading=lazy></a></p><div class="box notices cstyle default" style=--VARIABLE-BOX-color:success><div class=box-label>Tip</div><div class=box-content><p>You can assign a Routing Key to multiple Escalation Policies if required by simply selecting more from the list</p></div></div><p>If you now navigate back to <strong>Teams → [Your Team Name] → Escalation Policies</strong> and look at the settings for your <strong>Primary</strong> and <strong>Waiting Room</strong> polices you will see that these now have <strong>Routes</strong> assigned to them.</p><p><a href=#image-2ab3a608ddbca685688415a819e888e3 class=lightbox-link><img src=../../../oncall/getting_started/routing/../../images/routing-keys-assigned.png alt="Routing Keys Assigned" style=height:auto;width:auto loading=lazy></a>
<a href=javascript:history.back(); class=lightbox id=image-2ab3a608ddbca685688415a819e888e3><img src=../../../oncall/getting_started/routing/../../images/routing-keys-assigned.png alt="Routing Keys Assigned" class=lightbox-image loading=lazy></a></p><p>The <strong>24/7</strong> policy does not have a Route assigned as this will only be triggered via an <strong>Execute Policy</strong> escalation from the <strong>Primary</strong> policy.</p><hr><p>Please wait for the instructor before proceeding to the Incident Lifecycle/Overview module.</p><footer class=footline></footer></article></div></main></div><script src=../../../js/clipboard.min.js?1679592575 defer></script>
<script src=../../../js/perfect-scrollbar.min.js?1679592575 defer></script>
<script src=../../../js/theme.js?1679592575 defer></script></body></html>